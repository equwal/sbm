#!/bin/sh
DMENULINES=15

help () {
    echo "Call without an argument to be prompted with dmenu."
    echo "Flags:"
    printf "-h, --help\n-c, --copy\n-a, --add\n-e, --edit\n"
}
copy () {
    sort -t2 "$BOOKMARKS" | dmenu -l $DMENULINES -p "bookmark:" | cut -f 1 -d ' ' | xclip -i -selection clipboard
}
# add () {
#
# }
# edit () {
#
# }
# plumb () {
# }
#
promptflag () {
    action="$(printf 'copy\nadd\nedit' | dmenu -l 3 -p 'action:')"
    [ "$action" = "copy" ] && copy
    [ "$action" = "edit" ] && edit
    [ "$action" = "add" ] && add
    [ "$action" = "plumb" ] && plumb
}
[ "$1" = '-h' ] || [ "$1" = '--help' ] && help
[ "$1" = '-c' ] || [ "$1" = '--copy' ] && copy
[ "$1" = '-a' ] || [ "$1" = '--add' ]  && add
[ "$1" = '-e' ] || [ "$1" = '--edit' ] && edit
[ "$1" = '-e' ] || [ "$1" = '--plumb' ] && plumb
[ -z "$1" ] && promptflag
[ -n "$2" ] && echo "Too many arguments: use one or none." && exit 1
